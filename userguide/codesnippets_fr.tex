\section{CodeSnippets}\label{sec:codesnippets}

L'extension CodeSnippets permet de structurer des modules de texte et des liens vers des fichiers en fonction de catégories dans une vue arborescente. Les modules sont utilisés pour stocker des fichiers fréquemment utilisés, des constructions de modules de texte, le tout géré depuis un endroit centralisé. Imaginez la situation suivante : Un certain nombre de fichiers source fréquemment utilisés sont stockés dans divers répertoires du système de fichiers. La fenêtre de CodeSnippets vous donne l'opportunité de créer des catégories et, à l'intérieur de ces catégories, des liens vers les fichiers requis. Avec cette fonctionnalité, vous pouvez contrôler l'accès aux fichiers indépendamment de l'endroit où ils sont stockés dans le système de fichiers, et vous pouvez rapidement naviguer entre ces fichiers sans avoir besoin de les chercher un peu partout dans le système.

\hint{Vous pouvez utiliser les variables \codeblocks ou les variables d'environnement dans les liens vers les fichiers comme \codeline{$(VARNAME)/name.pdf} pour paramétrer un lien dans le navigateur de CodeSnippets.}

La liste des modules de texte et des liens peut être enregistrée dans la fenêtre des CodeSnippets en cliquant sur le bouton droit de la souris et en sélectionnant \samp{Enregistrer l'index} depuis le menu de contexte. Le fichier \file{codesnippets.xml} qui est alors créé par cette procédure, se trouve dans le sous-répertoire \file{codeblocks} du répertoire \file{Documents and Settings\osp Application data}. Sous Linux, cette information est enregistrée dans le sous-répertoire \file{.codeblocks} de votre répertoire HOME. Les fichiers de configuration de \codeblocks seront chargés au démarrage suivant. Si vous souhaitez enregistrer le contenu des CodeSnippets à un autre endroit, sélectionnez l'entrée \samp{Enregistrer l'index sous}. Pour charger ce fichier, sélectionnez \samp{Charger le fichier d'index} lors du démarrage suivant de \codeblocks ou incluez le répertoire dans les \samp{Paramètres} du menu de contexte de \samp{Répertoire des Snippets}. Les paramétrages sont enregistrés dans le fichier correspondant \file{codesnippets.ini} dans votre application data.

Pour inclure une catégorie, utilisez le menu \samp{Ajouter une sous-catégorie}. Une catégorie peut contenir des  Snippets (modules de texte) ou des Liens vers un fichier. Un module de texte est créé via la commande \samp{Ajouter un Snippet} depuis le menu de contexte. Le contenu est intégré dans le module de texte comme un \samp{Nouveau snippet} en sélectionnant un passage de texte dans l'éditeur de \codeblocks et en le glissant-déposant sur le module dont les propriétés s'affichent. En double-cliquant sur la nouvelle entrée ou en sélectionnant  \samp{Éditer le Texte} on en éditera le contenu.

\screenshot{edit_snippet}{Édition d'un module de texte}

La sortie d'un module de texte est gérée dans \codeblocks via la commande \samp{Appliquer} du menu de contexte ou en faisant un glisser-déposer dans l'éditeur. Sous Windows, le contenu d'un Snippet peut également être glissé-déposé dans d'autres applications. Dans le navigateur de CodeSnippets vous pouvez copier une sélection par glisser-déposer vers une catégorie différente.

De plus, les modules de texte peuvent être paramétrés par des variables \var{name} qui peuvent être accédées via  \codeline{$(name)} (voir \pxref{fig:edit_snippet}). Les valeurs des variables peuvent être récupérées dans un champ d'entrée si le module de texte est appelé via la commande du menu de contexte \samp{Appliquer}.

À côté des modules de texte, des liens vers des fichiers peuvent aussi être créés. Si, après avoir créé un module de texte, vous cliquez sur la commande \samp{Propriétés} du menu de contexte, vous pouvez alors sélectionner une cible de type lien en cliquant sur le bouton \samp{Lien cible}. Cette procédure convertira automatiquement le module de texte en un lien vers un fichier. Dans CodeSnippets, tous les modules de texte sont marqués par un symbole T, les liens vers un fichier par un symbole F et les urls par un symbole U. Si vous voulez ouvrir un fichier sélectionné (lien) dans la vue des codesnippets, sélectionnez tout simplement le menu de contexte \menu{Ouvrir le fichier} ou tout en maintenant enfoncée la touche \samp{Alt} effectuez un double-clic sur le fichier.

\hint{Vous pouvez même ajouter une url (comme https://www.codeblocks.org) dans les modules de texte. L'url peut être ouverte en utilisant le menu de contexte \menu{Ouvrir l'Url} ou en utilisant un glisser-déposer vers votre navigateur favori.}
%\hint{Si vous avez choisi la configuration \samp{L’ouvrir avec l’application associée} dans \menu{Paramètres,Environnement} pour la gestion de l’extension de fichiers, c’est l’application assignée par Windows pour cette extension de fichier qui sera utilisée (voir \pxref{sec:file_extension}).}

Avec un tel paramétrage, si vous ouvrez un lien vers un fichier pdf depuis la vue des codesnippets, un visualiseur de fichiers pdf sera automatiquement démarré. Cette méthode rend possible à l'utilisateur l'accès à des fichiers répartis un peu partout sur le réseau, comme des données, mises en forme, documentations etc., à l'aide des applications communes, simplement par le biais d'un lien. Le contenu des codesnippets est enregistré dans le fichier \file{codesnippets.xml}, la configuration est enregistrée dans le fichier \file{codesnippets.ini} de votre répertoire \file{application data}. Ce fichier ini contiendra, par exemple, le chemin du fichier \file{codesnippets.xml}.

\figures[hbt!][width=.4\columnwidth]{codesnippets}{Vue des CodeSnippets}

\codeblocks supporte l'utilisation de différents profils. Ces profils sont aussi nommés personnalités. En démarrant, avec l'option \opt{--personality=\var{profile}}, \codeblocks en ligne de commande vous créez ou utilisez un profil existant. Dans ce cas, le paramétrage ne sera pas enregistré dans le fichier \file{default.conf}, mais plutôt dans un \file{\var{personality}.conf} de votre répertoire \file{application data}. L'extension Codesnippets enregistrera alors ses paramètres dans un fichier \file{\var{personality}.codesnippets.ini}. Maintenant, si vous chargez un nouveau contenu \file{\var{name.xml}} dans les paramètres de codesnippets via \samp{Charger un fichier d'index}, ce contenu sera enregistré dans le fichier ini correspondant. L'avantage de cette méthode tient dans le fait que dans le cas où il y a différents profils, on peut gérer plusieurs configurations de modules de textes et de liens.

L'extension offre une fonction de recherche complémentaire pour naviguer dans les catégories et les Snippets. La façon de rechercher dans les Snippets, catégories ou Snippets et catégories peut s'ajuster. En entrant l'expression de recherche requise, l'entrée correspondante est automatiquement sélectionnée dans la vue. La \pxref{fig:codesnippets} affiche une fenêtre CodeSnippets typique.

%\figures[hbt!][width=.4\columnwidth]{codesnippets}{Vue des CodeSnippets}

\hint{Quand on utilise des modules de texte volumineux, le contenu de ces modules devrait être enregistré sous forme de fichiers via \samp{Convertir en lien vers fichier} de façon à réduire l'utilisation mémoire du système. Si vous supprimez un codesnippet ou un lien vers un fichier, il est en fait déplacé vers la corbeille (ou un répertoire \file{.trash}); si vous maintenez la touche Maj enfoncée, cet élément sera réellement détruit.}

